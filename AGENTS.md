# Codex instructions for this repo

## Agent logs and readme
- Before performing any task first update memory from AGENT-LOG.md file to understand what had been done earlier.
- After performing any task briefly log changes made to the code in AGENT-LOG.md
- After making any changes to the code update README.md

## How to run tests
- Unit tests (default): `./mvnw -B test`
- Run tests after each code change (not just on request).

## Config files
- The app imports external config from: `./config/config.yaml`
  via `spring.config.import=optional:file:./config/config.yaml` in `application.properties`.
- In Codex, `config/config.yaml` is generated by the environment setup script from `config/config.yaml.example`.
- Do not commit real tokens to the repo. Only commit `config/config.yaml.example`.

## Avoid network calls in unit tests
- Unit tests must not call VEZHA/Telegram or require live services.
- Prefer mocking `FaceApiRepository` / API clients.
- Scheduling should be disabled in test runs (set `spring.task.scheduling.enabled=false`).

## Modules with startup behavior
- `UnknownListInitializer` (ApplicationRunner) may call VEZHA at startup unless disabled via `unknown.initializer.enabled=false`.
- `EvacuationStatusService` must not autostart in unit tests (use `evacuation.enabled=false` and/or `evacuation.autostart=false`).

## Useful commands
- Run a single test class: `./mvnw -B -Dtest=ClassName test`
- Run a single test method: `./mvnw -B -Dtest=ClassName#methodName test`
